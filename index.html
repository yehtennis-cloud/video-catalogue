<!DOCTYPE html>
<html>
<div id="authStatus" style="
  padding: 10px;
  border-bottom: 1px solid #ccc;
  margin-bottom: 15px;
  font-weight: bold;
">
  Checking login status...
</div>
<head>
  <title>Video Catalogue</title>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
</head>
<body>

  <h2>Admin Login</h2>
  <input type="email" id="email" placeholder="Admin email">
  <input type="password" id="password" placeholder="Password">
  <button id="loginBtn">Login</button>

  <p id="loginMessage"></p>

  <hr>

  <button id="guestBtn">Continue as Guest</button>
<script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
<script src="script.js"></script>
window.addEventListener('DOMContentLoaded', async () => {
  const { data: { user } } = await supabaseClient.auth.getUser();
  if (!user) return;

  const { data: profile } = await supabaseClient
    .from('profiles')
    .select('role')
    .eq('id', user.id)
    .single();

  if (profile?.role === 'admin') {
    window.location.href = 'submission.html';
  }
});
</body>
</html>


